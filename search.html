<!-- idk how to do this -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search List</title>
    <style>
        body {
            font-family: "Helvetica", Arial, sans-serif;
            margin: 0;
            padding: 0; 
        }
        h1 {
            text-align: left; 
            margin: 30px; 
            margin-bottom: 10px;
            color: rgb(8, 29, 115); 
        }

        #results {
            text-align: left; 
            margin: 0px 30px; 
            margin-bottom: 20px; 
            font-size: 1.2em; 
            color: #555;
        }

        #links-container {
            margin: 20px; 
            display: flex;
            flex-direction: column;
            max-width: 300px; 
            align-items: left;
            gap: 0.15rem; 
        }

        .search-link {
            display: inline-block;
            text-decoration: none;
            color: rgb(8, 29, 115);
            border: 1px solid rgb(8, 29, 115);
            padding: 10px 20px;
            border-radius: 5px;
            font-size: 1em;
            background-color: white;
            transition: all 0.3s ease;
        }

        .search-link:hover {
            background-color: rgb(8, 29, 115);
            color: white;
        }

        .no-results {
            text-align: center;
            font-size: 1.2em;
            color: #888;
        }

        .links {
            margin-top: 20px;
            text-align: center;
        }

        .links a {
            text-decoration: none;
            color: rgb(8, 29, 115);
            font-weight: bold;
        }

        .links a:hover {
            text-decoration: underline;
        }
    </style>
    <script>
        window.onload = function(){
            const parameters = new URLSearchParams(window.location.search);
            const searchData = parameters.get('input');
            if (searchData){
                document.getElementById('results').innerText = `You searched: ${decodeURIComponent(searchData)}`;     
            }
       
            const links = [
                {name: '100 ~ Discovering CS', url: 'student-form.html?password=queues'},
                {name: '107 ~ Intro to Computing', url: 'student-form.html?password=queue2'},
                {name: '109 ~ Programming with MatLab', url: 'student-form.html?password=queues'},
                {name: '111 ~ Program Design I', url: 'student-form.html?password=queues'},
                {name: '301 ~ Languages and Automata', url: 'student-form.html?password=queues'},
                {name: '341 ~ Language Design', url: 'student-form.html?password=queues'},
                {name: '342 ~ Software Design', url: 'student-form.html?password=queues'},
                {name: '351 ~ Data Structure Practicum', url: 'student-form.html?password=queues'},
                {name: '361 ~ Systems Programming', url: 'student-form.html?password=queues'},
                {name: '362 ~ Computer Design', url: 'student-form.html?password=queues'},
                {name: '377 ~ Ethical Issues in Computing', url: 'student-form.html?password=queues'},
                {name: '378 ~ Framework-based Development for Handheld Devices', url: 'student-form.html?password=queues'},
                {name: '391 ~ Computer Science Practicum', url: 'student-form.html?password=queues'},
            ];

            const filteredLinks = links.filter(link =>
                link.name.toLowerCase().includes(searchData.toLowerCase())
            );

            // generate the html for the filtered links
            const linksContainer = document.getElementById('links-container');
            if (filteredLinks.length > 0) {
                filteredLinks.forEach(link => {
                    const linkElement = document.createElement('a');
                    linkElement.href = link.url;7
                    linkElement.textContent = link.name;
                    linkElement.classList.add('search-link');
                    linksContainer.appendChild(linkElement);
                    linksContainer.appendChild(document.createElement('br'));  // For line breaks
                });
            } else {
                linksContainer.innerHTML = '<p>No results found.</p>';
            }

        };

    </script>
</head>

<body>
    <div id="header"></div>

    <h1>Search Results</h1>

    <p id="results"></p>

    <div id="links-container">
    </div>

    <div class = "links">
        <a href="dropdown.html">‚Üê Back to Classes</a>
    </div>

    <!-- javascript to load header -->
    <script>
        fetch('header.html')
        .then(response => response.text())
        .then(data => {
            document.getElementById('header').innerHTML = data;
    
            const searchInput = document.getElementById('searchInput');
            const searchIcon = document.getElementById('searchIcon');
            const closeIcon = document.getElementById('closeIcon');
    
            // search bar toggle
            function toggleSearchBar() {
                const isActive = searchInput.classList.contains('active');
    
                if (isActive) {
                    searchInput.classList.remove('active');
                    searchIcon.style.display = 'inline';
                    closeIcon.style.display = 'none';
                } else {
                    searchInput.classList.add('active');
                    searchIcon.style.display = 'none';
                    closeIcon.style.display = 'inline';
                    searchInput.focus();
                }
            }
    
            // event listeners
            searchIcon.addEventListener('click', toggleSearchBar);
            closeIcon.addEventListener('click', toggleSearchBar);
    
            // redirect on enter
            searchInput.addEventListener('keydown', function (event) {
                if (event.key === 'Enter') {
                    const inputValue = searchInput.value;
                    if (inputValue) {
                        const encodedVal = encodeURIComponent(inputValue);
                        window.location.href = `search.html?input=${encodedVal}`;
                    }
                }
            });
        })
        .catch(error => console.error('Header loading error:', error));
    </script>
</body>

</html>